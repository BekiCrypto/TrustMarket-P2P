
{
  "entities": {
    "UserProfile": {
      "title": "User Profile",
      "description": "Represents a user within the dispute resolution platform.",
      "type": "object",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the user." },
        "name": { "type": "string", "description": "The user's display name." },
        "email": { "type": "string", "description": "The user's email address." },
        "avatarId": { "type": "string", "description": "Identifier for the user's avatar image." },
        "reputation": { "type": "number", "description": "User's reputation score (0-100)." },
        "trades": { "type": "number", "description": "Total number of completed trades." },
        "kycStatus": {
          "type": "string",
          "enum": ["Verified", "Pending", "Unverified", "Rejected"],
          "description": "The user's Know Your Customer (KYC) status."
        }
      },
      "required": ["id", "name", "reputation", "trades", "kycStatus"]
    },
    "Dispute": {
      "title": "Dispute",
      "description": "Represents a dispute case between a buyer and a seller.",
      "type": "object",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the dispute." },
        "status": { "type": "string", "enum": ["Open", "Resolved", "Pending"], "description": "The current status of the dispute." },
        "buyerId": { "type": "string", "description": "The ID of the user acting as the buyer." },
        "sellerId": { "type": "string", "description": "The ID of the user acting as the seller." },
        "dateInitiated": { "type": "string", "format": "date-time", "description": "The timestamp when the dispute was initiated." },
        "resolution": {
          "type": "object",
          "description": "Details about the resolution of the dispute.",
          "properties": {
            "finalReasoning": { "type": "string", "description": "The arbitrator's final reasoning for the decision." },
            "buyerPercentage": { "type": "number", "description": "The percentage of escrow awarded to the buyer." },
            "sellerPercentage": { "type": "number", "description": "The percentage of escrow awarded to the seller." },
            "resolvedBy": { "type": "string", "description": "The UID of the arbitrator who resolved the dispute." },
            "resolvedAt": { "type": "string", "format": "date-time", "description": "The timestamp when the dispute was resolved." }
          }
        }
      },
      "required": ["id", "status", "buyerId", "sellerId", "dateInitiated"]
    },
    "ChatMessage": {
        "title": "Chat Message",
        "description": "A single message within a dispute's chat transcript.",
        "type": "object",
        "properties": {
          "senderId": { "type": "string", "description": "The ID of the user who sent the message." },
          "message": { "type": "string", "description": "The content of the message." },
          "timestamp": { "type": "string", "format": "date-time", "description": "When the message was sent." }
        },
        "required": ["senderId", "message", "timestamp"]
    },
    "Evidence": {
        "title": "Evidence",
        "description": "Represents a piece of evidence, like a receipt or photo, submitted in a dispute.",
        "type": "object",
        "properties": {
            "id": { "type": "string", "description": "Unique ID for the evidence." },
            "disputeId": { "type": "string", "description": "The dispute this evidence belongs to." },
            "url": { "type": "string", "description": "URL to the evidence file." },
            "description": { "type": "string", "description": "A brief description of the evidence." }
        },
        "required": ["id", "disputeId", "url"]
    },
    "Listing": {
      "title": "Listing",
      "description": "Represents a marketplace listing.",
      "type": "object",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the listing." },
        "title": { "type": "string", "description": "The title of the listing." },
        "sellerId": { "type": "string", "description": "The ID of the user who is the seller." },
        "price": { "type": "number", "description": "The price of the item." },
        "status": { "type": "string", "enum": ["Active", "Sold", "Suspended"], "description": "The current status of the listing." }
      },
      "required": ["id", "title", "sellerId", "price", "status"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "google.com"
    ]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/UserProfile" },
      "description": "Stores public profiles for all users."
    },
    "/disputes/{disputeId}": {
      "schema": { "$ref": "#/entities/Dispute" },
      "description": "Top-level collection for all dispute cases."
    },
    "/disputes/{disputeId}/chat": {
        "schema": { "$ref": "#/entities/ChatMessage" },
        "description": "Sub-collection for chat messages related to a specific dispute."
    },
    "/disputes/{disputeId}/evidence": {
        "schema": { "$ref": "#/entities/Evidence" },
        "description": "Sub-collection for evidence files related to a specific dispute."
    },
    "/listings/{listingId}": {
      "schema": { "$ref": "#/entities/Listing" },
      "description": "Top-level collection for all marketplace listings."
    }
  }
}
